// AUTOGENERATED FILE - DO NOT MODIFY!
// This file was generated by Djinni from all_datatypes_json.djinni

#pragma once

#include "json+extension.hpp"
#include "my_flags.hpp"
#include <algorithm>
#include <nlohmann/json.hpp>

namespace nlohmann {

template<>
struct adl_serializer<::MyFlags>
{
    static void to_json(json& j, ::MyFlags e)
    {
        static const std::pair<::MyFlags, json> m[] = {{::MyFlags::FLAG1,"flag1"},{::MyFlags::FLAG2,"flag2"},{::MyFlags::FLAG3,"flag3"}};
        j = json::array();
        for(const auto& flagOption : m)
        {
            if(static_cast<unsigned>(e & flagOption.first) != 0)
            {
                j.push_back(flagOption.second);
            }
        }
    }
    static void from_json(const json& j, ::MyFlags& e)
    {
        static const std::pair<::MyFlags, json> m[] = {{::MyFlags::FLAG1,"flag1"},{::MyFlags::FLAG2,"flag2"},{::MyFlags::FLAG3,"flag3"}};
        e = static_cast<::MyFlags>(0);
        for(const auto& flagName : j)
        {
            auto it = std::find_if(std::begin(m), std::end(m),
                                   [flagName](const std::pair<::MyFlags, json>& ej_pair) -> bool
            {
                return ej_pair.second == flagName;
            });
            if(it != std::end(m))
            {
                e |= it->first;
            }
        }
    }
};

}  // namespace nlohmann
